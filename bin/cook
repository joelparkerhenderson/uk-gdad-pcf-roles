#!/bin/sh
set -euf

# Cook the Claude markdown output to use better formatting.
# Specifically, this script adjusts the headlines and casings.
# See the correspondign file cook-test.md for test examples.

gsed '/./{H;$!d} ; x ;
s/### [0-9]\{1,\}\. \(\**Title:\** \|\)\(.*\)\n\(\**\w\{1,\}:\** \|\)\(.*\)\n\(\**\w\{1,\}:\** \|\)\(.*\)\n\**URL:\** \(.*\)\n\**Summary:\** \(.*\)/- [\2](\7): \8 \4. \6./;
s/### [0-9]\{1,\}\. \(\**Title:\** \|\)\(.*\)\n\(\**\w\{1,\}:\** \|\)\(.*\)\n\**URL:\** \(.*\)\n\**Summary:\** \(.*\)/- [\2](\5): \6 \4./;
s/### [0-9]\{1,\}\. \(\**Title:\** \|\)\(.*\)\n\**URL:\** \(.*\)\n\**Summary:\** \(.*\)/- [\2](\3): \4/;
s/^## COURSERA COURSES/## Coursera courses/;
s/^## UDEMY COURSES/## Udemy courses/;
s/^## SKILLSOFT COURSES/## Skillsoft courses/;
s/^## EDX COURSES/## edX courses/;
s/^## MIT OPENCOURSEWARE COURSES/## MIT OpenCourseWare courses/;
s/^## BLOG POSTS/## Blog posts/;
s/^## RESEARCH ARTICLES/## Research articles/;
s/^## YOUTUBE VIDEOS/## Videos/;
s/^## AMAZON KINDLE BOOKS/## Books/;
' "$@"
